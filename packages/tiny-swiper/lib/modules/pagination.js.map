{"version":3,"file":"pagination.js","sources":["../../src/core/render/dom.ts","../../src/modules/pagination.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    addClass,\n    removeClass\n} from '../core/render/dom'\nimport { SwiperInstance, SwiperPlugin } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginPaginationOptions = {\n    el: string\n    clickable: boolean\n    clickableClass: 'swiper-pagination-clickable'\n    bulletClass: string | 'swiper-pagination-bullet'\n    bulletActiveClass: string | 'swiper-pagination-bullet-active'\n}\n\nexport type SwiperPluginPaginationPartialOptions = Partial<SwiperPluginPaginationOptions>\n\nexport type SwiperPluginPaginationInstance = {\n    $pageList: HTMLElement[]\n    $pagination: HTMLElement | null\n}\n\nexport default <SwiperPlugin>function SwiperPluginPagination (\n    instance: SwiperInstance & {\n        pagination?: SwiperPluginPaginationInstance\n    },\n    options: Options & {\n        pagination?: SwiperPluginPaginationPartialOptions\n    }\n) {\n    const isEnable = Boolean(options.pagination)\n    const paginationOptions = <SwiperPluginPaginationOptions>Object.assign({\n        clickable: false,\n        bulletClass: 'swiper-pagination-bullet',\n        bulletActiveClass: 'swiper-pagination-bullet-active',\n        clickableClass: 'swiper-pagination-clickable'\n    }, options.pagination)\n    const paginationInstance = {\n        $pageList: [],\n        $pagination: null\n    } as unknown as SwiperPluginPaginationInstance\n\n    if (!isEnable) return\n\n    instance.on('after-init', () => {\n        const {\n            bulletClass,\n            bulletActiveClass,\n            clickableClass\n        } = <SwiperPluginPaginationOptions>paginationOptions\n        const {\n            element\n        } = instance.env\n        const {\n            $list\n        } = element\n\n        const $pagination = (typeof paginationOptions.el === 'string'\n            ? document.body.querySelector(paginationOptions.el)\n            : paginationOptions.el) as HTMLElement\n        const $pageList: Array<HTMLElement> = []\n        const $group = document.createDocumentFragment()\n        const dotCount = $list.length - Math.ceil(options.slidesPerView) + 1\n\n        options.excludeElements.push($pagination as HTMLElement)\n\n        paginationInstance.$pagination = $pagination\n        paginationInstance.$pageList = $pageList\n\n        for (let index = 0; index < dotCount; index++) {\n            const $page = document.createElement('div')\n\n            addClass(\n                $page,\n                index === instance.state.index ? [bulletClass, bulletActiveClass] : bulletClass\n            )\n            $pageList.push($page)\n            $group.appendChild($page)\n        }\n\n        $pagination.appendChild($group)\n\n        if (paginationOptions.clickable) {            \n            addClass($pagination, clickableClass)\n\n            $pagination.addEventListener('click', (e: Event) => {\n                instance.slideTo($pageList.indexOf(e.target as HTMLElement))\n                e.stopPropagation()\n            })\n        }\n    })\n\n    instance.on('after-destroy', () => {\n        if (!isEnable) return\n\n        paginationInstance.$pagination!.innerHTML = ''\n        paginationInstance.$pageList = []\n        paginationInstance.$pagination = null\n    })\n\n    instance.on('after-slide', (\n        currentIndex: number\n    ) => {\n        const { bulletActiveClass } = paginationOptions\n\n        paginationInstance.$pageList && paginationInstance.$pageList.forEach(($page, index) => {\n            if (index === currentIndex) {\n                addClass($page, bulletActiveClass)\n            } else {\n                removeClass($page, bulletActiveClass)\n            }\n        })\n    })\n}\n"],"names":["addClass","el","list","Array","isArray","forEach","clz","classList","contains","add","removeClass","remove","SwiperPluginPagination","instance","options","isEnable","Boolean","pagination","paginationOptions","Object","assign","clickable","bulletClass","bulletActiveClass","clickableClass","paginationInstance","$pageList","$pagination","on","element","env","$list","document","body","querySelector","$group","createDocumentFragment","dotCount","length","Math","ceil","slidesPerView","excludeElements","push","index","$page","createElement","state","appendChild","addEventListener","e","slideTo","indexOf","target","stopPropagation","innerHTML","currentIndex"],"mappings":"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"}