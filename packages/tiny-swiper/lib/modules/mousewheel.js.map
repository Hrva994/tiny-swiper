{"version":3,"file":"mousewheel.js","sources":["../../src/core/render/dom.ts","../../src/modules/mousewheel.ts"],"sourcesContent":["export function addClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (!el.classList.contains(clz) && el.classList.add(clz)))\n}\n\nexport function removeClass (\n    el: HTMLElement,\n    list: Array<string> | string = []\n): void {\n    if (!Array.isArray(list)) list = [list]\n\n    list.forEach(clz => (el.classList.contains(clz) && el.classList.remove(clz)))\n}\n\nexport function attachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject,\n    opts?: boolean | AddEventListenerOptions\n): void {\n    el.addEventListener(evtName, handler, opts)\n}\n\nexport function detachListener (\n    el: HTMLElement | Document | Window,\n    evtName: string,\n    handler: EventListenerOrEventListenerObject\n): void {\n    el.removeEventListener(evtName, handler)\n}\n\nexport function removeAttr (\n    el: HTMLElement,\n    attr: string\n): void {\n    el.removeAttribute(attr)\n}\n\nexport function setAttr (\n    el: HTMLElement,\n    attr: string,\n    value = ''\n): HTMLElement {\n    el.setAttribute(attr, value)\n    return el\n}\n\nexport function setStyle (\n    el: HTMLElement,\n    style: {[key: string]: string},\n    forceRender?: boolean\n): HTMLElement {\n    Object.keys(style).forEach(prop => {\n        // TS7015: Element implicitly has an 'any' type because index expression is not of type 'number'.\n        el.style[prop as any] = style[prop]\n    })\n    // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    forceRender && getComputedStyle(el)\n\n    return el\n}\n\nexport function getTranslate (\n    el: HTMLElement,\n    isHorizontal: boolean\n): number {\n    const matrix = getComputedStyle(el).transform.replace(/[a-z]|\\(|\\)|\\s/g, '').split(',').map(parseFloat)\n    let arr: Array<number> = []\n\n    if (matrix.length === 16) {\n        arr = matrix.slice(12, 14)\n    } else if (matrix.length === 6) {\n        arr = matrix.slice(4, 6)\n    }\n    return (<Array<number>>arr)[isHorizontal ? 0 : 1] || 0\n}\n","import {\n    attachListener,\n    detachListener\n} from '../core/render/dom'\nimport { SwiperInstance } from '../core/index'\nimport { Options } from '../core/options'\n\nexport type SwiperPluginMousewheelOptions = Options & {\n    mousewheel: {\n        invert: false\n        sensitivity: 1\n        interval: 400\n    }\n}\n\nexport type SwiperPluginMousewheelInstance = {\n    $el: HTMLElement\n}\n\nexport default function SwiperPluginMousewheel (\n    instance: SwiperInstance & {\n        mousewheel: SwiperPluginMousewheelInstance\n    },\n    options: SwiperPluginMousewheelOptions\n) {\n    const mousewheel = {\n        $el: null\n    } as unknown as SwiperPluginMousewheelInstance\n    const wheelStatus = {\n        wheeling: false,\n        wheelDelta: 0,\n        wheelingTimer: 0\n    }\n    const handler = (e: WheelEvent) => {\n        const delta = Math.abs(e.deltaX) > Math.abs(e.deltaY)\n            ? e.deltaX\n            : e.deltaY\n        const {\n            index\n        } = instance.state\n\n        if ((Math.abs(delta) - Math.abs(wheelStatus.wheelDelta) > 0)\n            && !wheelStatus.wheeling\n            && Math.abs(delta) >= options.mousewheel.sensitivity\n        ) {\n            const step = options.mousewheel.invert ? -1 : 1\n\n            instance.slideTo(delta > 0\n                ? index - step\n                : index + step\n            )\n            wheelStatus.wheeling = true\n            wheelStatus.wheelingTimer = setTimeout(() => {\n                wheelStatus.wheeling = false\n            }, options.mousewheel.interval) as unknown as number\n        }\n        wheelStatus.wheelDelta = delta\n        e.preventDefault()\n        e.stopPropagation()\n    }\n\n    instance.on('before-init', () => {\n        if (options.mousewheel) {\n            options.mousewheel = Object.assign({\n                invert: false,\n                sensitivity: 1,\n                interval: 400\n            }, options.mousewheel)\n        }\n    })\n\n    instance.on('after-init', () => {\n        if (!options.mousewheel) return\n\n        const {\n            element\n        } = instance.env\n        const {\n            $el\n        } = element\n\n        mousewheel.$el = $el\n\n        attachListener($el, 'wheel', <EventListener>handler)\n    })\n\n    instance.on('after-destroy', () => {\n        if (!options.mousewheel) return\n\n        detachListener(mousewheel.$el, 'wheel', <EventListener>handler)\n        delete mousewheel.$el\n    })\n}\n"],"names":["attachListener","el","evtName","handler","opts","addEventListener","detachListener","removeEventListener","SwiperPluginMousewheel","instance","options","mousewheel","$el","wheelStatus","wheeling","wheelDelta","wheelingTimer","e","delta","Math","abs","deltaX","deltaY","index","state","sensitivity","step","invert","slideTo","setTimeout","interval","preventDefault","stopPropagation","on","Object","assign","element","env"],"mappings":";;;;;;aAkBgBA,eACZC,IACAC,SACAC,SACAC;IAEAH,EAAAA,EAAE,CAACI,gBAAH,CAAoBH,OAApB,EAA6BC,OAA7B,EAAsCC,IAAtC;IACH;aAEeE,eACZL,IACAC,SACAC;IAEAF,EAAAA,EAAE,CAACM,mBAAH,CAAuBL,OAAvB,EAAgCC,OAAhC;IACH;;aCduBK,uBACpBC,UAGAC;IAEA,MAAMC,UAAU,GAAG;IACfC,IAAAA,GAAG,EAAE;IADU,GAAnB;IAGA,MAAMC,WAAW,GAAG;IAChBC,IAAAA,QAAQ,EAAE,KADM;IAEhBC,IAAAA,UAAU,EAAE,CAFI;IAGhBC,IAAAA,aAAa,EAAE;IAHC,GAApB;;IAKA,MAAMb,OAAO,GAAG,SAAVA,OAAU,CAACc,CAAD;IACZ,QAAMC,KAAK,GAAGC,IAAI,CAACC,GAAL,CAASH,CAAC,CAACI,MAAX,IAAqBF,IAAI,CAACC,GAAL,CAASH,CAAC,CAACK,MAAX,CAArB,GACRL,CAAC,CAACI,MADM,GAERJ,CAAC,CAACK,MAFR;YAIIC,QACAd,QAAQ,CAACe,MADTD;;IAGJ,QAAKJ,IAAI,CAACC,GAAL,CAASF,KAAT,IAAkBC,IAAI,CAACC,GAAL,CAASP,WAAW,CAACE,UAArB,CAAlB,GAAqD,CAAtD,IACG,CAACF,WAAW,CAACC,QADhB,IAEGK,IAAI,CAACC,GAAL,CAASF,KAAT,KAAmBR,OAAO,CAACC,UAAR,CAAmBc,WAF7C,EAGE;IACE,UAAMC,IAAI,GAAGhB,OAAO,CAACC,UAAR,CAAmBgB,MAAnB,GAA4B,CAAC,CAA7B,GAAiC,CAA9C;IAEAlB,MAAAA,QAAQ,CAACmB,OAAT,CAAiBV,KAAK,GAAG,CAAR,GACXK,KAAK,GAAGG,IADG,GAEXH,KAAK,GAAGG,IAFd;IAIAb,MAAAA,WAAW,CAACC,QAAZ,GAAuB,IAAvB;IACAD,MAAAA,WAAW,CAACG,aAAZ,GAA4Ba,UAAU,CAAC;IACnChB,QAAAA,WAAW,CAACC,QAAZ,GAAuB,KAAvB;IACH,OAFqC,EAEnCJ,OAAO,CAACC,UAAR,CAAmBmB,QAFgB,CAAtC;IAGH;;IACDjB,IAAAA,WAAW,CAACE,UAAZ,GAAyBG,KAAzB;IACAD,IAAAA,CAAC,CAACc,cAAF;IACAd,IAAAA,CAAC,CAACe,eAAF;IACH,GA1BD;;IA4BAvB,EAAAA,QAAQ,CAACwB,EAAT,CAAY,aAAZ,EAA2B;IACvB,QAAIvB,OAAO,CAACC,UAAZ,EAAwB;IACpBD,MAAAA,OAAO,CAACC,UAAR,GAAqBuB,MAAM,CAACC,MAAP,CAAc;IAC/BR,QAAAA,MAAM,EAAE,KADuB;IAE/BF,QAAAA,WAAW,EAAE,CAFkB;IAG/BK,QAAAA,QAAQ,EAAE;IAHqB,OAAd,EAIlBpB,OAAO,CAACC,UAJU,CAArB;IAKH;IACJ,GARD;IAUAF,EAAAA,QAAQ,CAACwB,EAAT,CAAY,YAAZ,EAA0B;IACtB,QAAI,CAACvB,OAAO,CAACC,UAAb,EAAyB;YAGrByB,UACA3B,QAAQ,CAAC4B,IADTD;YAGAxB,MACAwB,QADAxB;IAGJD,IAAAA,UAAU,CAACC,GAAX,GAAiBA,GAAjB;IAEAZ,IAAAA,cAAc,CAACY,GAAD,EAAM,OAAN,EAA8BT,OAA9B,CAAd;IACH,GAbD;IAeAM,EAAAA,QAAQ,CAACwB,EAAT,CAAY,eAAZ,EAA6B;IACzB,QAAI,CAACvB,OAAO,CAACC,UAAb,EAAyB;IAEzBL,IAAAA,cAAc,CAACK,UAAU,CAACC,GAAZ,EAAiB,OAAjB,EAAyCT,OAAzC,CAAd;IACA,WAAOQ,UAAU,CAACC,GAAlB;IACH,GALD;IAMH;;;;;;;;"}